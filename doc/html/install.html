<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.15.2: http://docutils.sourceforge.net/" />
<title>install.txt</title>
<link rel="stylesheet" href="default.css" type="text/css" />
</head>
<body>
<div class="document">


<p>b'==============================nBuilding and installing Gameran==============================nn**Last modified**: October 27, 2019nn.. contents::nn.. role:: raw-html(raw)n   :format: htmln.. footer:: <a href="#id1"><span class="problematic" id="id2">:raw-html:`&lt;div style=&quot;text-align:right;&quot;&gt;For contact information, see &lt;a href=&quot;http://gamera.informatik.hsnr.de/contact.html&quot;&gt;http://gamera.informatik.hsnr.de/contact.html&lt;/a&gt;&lt;/div&gt;`</span></a>nnnnLinux (and other \*nix)n=======================nnPrerequisitesn-------------nn- Python 3.5 and later are supported, though Python 3.7 isn  recommended.nn  You will need to have the headers (but not the complete source) ton  build Gamera from source code.  Most Linux distributions includen  these as a separate package (eg. <tt class="docutils literal"><span class="pre">python-dev</span></tt> or <tt class="docutils literal"><span class="pre">python-devel</span></tt>).nn- wxPython 4.0.x or later.nn- <tt class="docutils literal">gcc</tt> version 3.1 or later.nn- libtiff 3.5.x or laternn- libpng 1.2.x or laternnIf any of these prerequisites is installed in a non standard directory,nyou can use the environment variables <tt class="docutils literal">CFLAGS</tt> and <tt class="docutils literal">LDFLAGS</tt> tonpass its locations to the build script, e.g.::nn  CFLAGS=-I/usr/local/includen  LDFLAGS=-L/usr/local/libn  export CFLAGS LDFLAGSnnnStandard Build and Installn--------------------------nnGamera is built using the Python-standard Distutils system.  Open anterminal and type::nn  python setup.py buildn  sudo python setup.py installnnBy default, parallelization of the genetic algorithms is only compiledninto Gamera under Linux and with gcc version &gt; 4.2, because we could onlynget it running in this environment. If you are sure that you have unbrokennOpenMP support on your system, you can compile Gamera with::nn  python setup.py build --openmp=yesnnIf Gamera is compiled with OpenMP on your system, but OpenMP does not worknon your system for some reason, you can switch it off with::nn  python setup.py build --openmp=nonnnInstalling without root privilegesn----------------------------------nn.. _without_root:nnIf you do not have root access to your machine, you can make a localninstallation of Gamera.nnA quick-and-easy way to do this is to use the <tt class="docutils literal">virtual_python.py</tt>nscript available <a href="#id5"><span class="problematic" id="id6">here__</span></a>, and then follow the standard installationninstructions (without using sudo)::nn  python setup.py buildn  python setup.py installnn.. __: <a class="reference external" href="http://peak.telecommunity.com/DevCenter/EasyInstall#creating-a-virtual-pythonnnAlternatively">http://peak.telecommunity.com/DevCenter/EasyInstall#creating-a-virtual-pythonnnAlternatively</a>, you can set up a local installation by hand.nnMake a local python module directory somewhere that you have writenprivileges (such as your home directory)::nn  mkdir ~/pythonnnFrom the Gamera build directory, install Gamera into that directory::nn  python setup.py install --home=~/pythonnnSet up an environment variables so Python can find stuff there (younmay want to add this to your ~/.bash_profile file)::nn  export PYTHONPATH=~/python/lib/pythonnnAdd the local Python scripts directory to your path::nn  export PATH=~/python/bin:$PATHnnNow you should be able to run the <tt class="docutils literal">gamera_gui</tt> script from thencommand line.nnRunningn-------nnRun the <tt class="docutils literal">gamera_gui</tt> script, which should have installed ton``/usr/local/bin``.  This file can also be copied anywhere (such asnthe Desktop) and double-clicked to run Gamera.nn.. note:: Running the script from the root of the source tree will notn  work, since it will not be able to find the compiled version of Gamera.nnInstalling without wxPythonn---------------------------nnWhen you need Gamera as a backend for document processing routines onna server and do not need the GUI, it can save a lot of trouble tonavoid the installation of wxPython. For this case, use the optionn``--nowx`` for <tt class="docutils literal">setup.py</tt>::nn  python setup.py --nowx buildn  sudo python setup.py --nowx installnnnMac OS-Xn========nnOn OS-X 10.5 (Panther) up to 10.10 (Yosemite), Gamera compiled oout of thenbox with the Apple command line develloper tools and the python and wxpythonnthat came preinstalled with the OS. Since version 10.11 (El Capatain),nthe &quot;system integrity protection&quot; (SIP) prevents installation of third partynpackages system wide on OS-X. You must therefore use <em>virtualenv</em> on newernOS-X to create a virtual environments.nnMoreover, Gamera currently requires wxPython before 4.0. Versions up to 3.0.xncame installed with OS-X, but are not shipped with OS-X &gt;= 10.11. OnnOS-X 10.11 (El Captain) and above, wxPython must therefore be compiled fromnthe sources.nnnInstallation up to 10.10 (Yosemite)n-----------------------------------nnPrerequisitesn`````````````nnGamera installs out of the box on 10.5 (Leopard) up to 10.10 (Yosemite).nThe only prerequisite is to install the comamnd line tools of XCode,nwhich are avalibale for free from the Apple App Store.nnnBuild and Installn`````````````````nnGamera is built using the Python-standard Distutils system.nTo build Gamera, open a terminal and type::nn  # the following line is only required on OS-X 10.6 and latern  export CFLAGS=&quot;-stdlib=libstdc++ -mmacosx-version-min=10.6&quot;n  python setup.py buildnnand then to install (you'll need to have admin privileges)::nn  sudo python setup.py installnnThe script <tt class="docutils literal">gamera_gui</tt> is installed to <tt class="docutils literal">/usr/local/bin</tt>,nwhich is also in the default search PATH for programs.nnnRunningn```````nnStart the Terminal application and run the <tt class="docutils literal">gamera_gui</tt> script.nn.. note:: Running the script from the root of the source tree will notn  work, since it will not be able to find the compiled version ofn  Gamera.nnnInstallation on 10.11 (El Captain) and aboven--------------------------------------------nnDue to the OS-X builtin &quot;system integrity protection&quot; (SIP), wxPythonnand Gamera  cannot be installed into the python branch shipped with OS-X.nYou must therefore install wxPython and Gamera into a <a href="#id5"><span class="problematic" id="id7">`virtual environment`__</span></a>.nn.. __: <a class="reference external" href="https://virtualenv.pypa.io/nnnPrerequisites">https://virtualenv.pypa.io/nnnPrerequisites</a>n`````````````nnAs Gamera must be installed from the C++ sources, you must have Xcodenand the Xcode Command Line Tools installed. When Xcode is already installed,nthe command line tools can be installed with <em>xcode-select --install</em>.nnIf you want to use the Python that comes with OS-X, you can installnthe prerequisites for virtual environments with::nn  sudo easy_install pipn  sudo pip2 install virtualenvnnIf this runs into problems with SIP or if you prefer to use the homebrewnversion of Python, you can install the prerequisites instead with::nn  brew install python2n  pip2 install virtualenvnnThen you can set up a virtual environment and install wxPython therein::nn  virtualenv /usr/local/lib/py2gameran  source /usr/local/lib/py2gamera/bin/activaten  pip2 install -U wxPythonnnnBuild and installn`````````````````nnYou can install Gamera into the same virtual environment with::nn  source /usr/local/lib/py2gamera/bin/activaten  cd root_to_gamera_sourcesn  python setup.py buildn  python setup.py installnnnRunningn```````nnOn OS-X, wxPython applications do not run in virtualenvs, becausenwxPython requires a &quot;Framework build of python&quot;. Fortunately, there isna simple workaround: store the following shell script as <em>gamera_gui</em>nin <em>$HOME/bin</em> and modify the PATH variable in $HOME/.profile such, thatn*$HOME/bin* is quite at the beginning of the list. Then you can runn*gamera_gui* from the shell, and the script handles the setup of thenvirtualenv automatically. (Thanks to <a href="#id5"><span class="problematic" id="id8">`George V. Reilly`__</span></a> for proposingnthis fix).nn.. __: <a class="reference external" href="http://www.georgevreilly.com/blog/2015/09/20/RunSnakeRun-WxPython-Brew-Virtualenv.htmlnnWrapper">http://www.georgevreilly.com/blog/2015/09/20/RunSnakeRun-WxPython-Brew-Virtualenv.htmlnnWrapper</a> shell-script for <em>gamera_gui</em> using the Python shipped with OS-X:nn.. code:: shnn  #n  # wrapper script for running gamera_guin  # from virtualenv with osx stock pythonn  #nn  source $HOME/python/py2gamera/bin/activatenn  WXPYTHON_APP=&quot;gamera_gui&quot;n  PYVER=&quot;$(python --version 2&gt;&amp;1 | cut -d ' ' -f 2 | cut -d '.' -f 1,2)&quot;nn  if [ -z &quot;$VIRTUAL_ENV&quot; ] ; thenn      echo &quot;You must activate your virtualenv: set '$VIRTUAL_ENV'&quot;n      exit 1n  finn  SYSTEM_FRAMEWORK_PYTHON_ROOT=&quot;/Library/Frameworks/Python.framework/Versions/$PYVER&quot;n  # OS X &gt;= 10.10n  SYSTEM_FRAMEWORK_PYTHON_ROOT=&quot;/System$SYSTEM_FRAMEWORK_PYTHON_ROOT&quot;nn  PYTHON_BINARY=&quot;bin/python$PYVER&quot;n  FRAMEWORK_PYTHON=&quot;/usr/bin/python$PYVER&quot;nn  # Use the Framework Python to run the appn  export PYTHONHOME=$VIRTUAL_ENVn  exec &quot;$FRAMEWORK_PYTHON&quot; &quot;$VIRTUAL_ENV/bin/$WXPYTHON_APP&quot; $*nnnWrapper shell-script for <em>gamera_gui</em> using the homebrew Python:nn.. code:: shnn  #n  # wrapper script for running gamera_guin  # from virtualenv with homebrew pythonn  #nn  source /usr/local/lib/py2gamera/bin/activatenn  WXPYTHON_APP=&quot;gamera_gui&quot;n  PYVER=&quot;$(python --version 2&gt;&amp;1 | cut -d ' ' -f 2 | cut -d '.' -f 1,2)&quot;nn  if [ -z &quot;$VIRTUAL_ENV&quot; ] ; thenn      echo &quot;You must activate your virtualenv: set '$VIRTUAL_ENV'&quot;n      exit 1n  finn  SYSTEM_FRAMEWORK_PYTHON_ROOT=&quot;/Library/Frameworks/Python.framework/Versions/$PYVER&quot;n  # OS X &gt;= 10.10n  SYSTEM_FRAMEWORK_PYTHON_ROOT=&quot;/System$SYSTEM_FRAMEWORK_PYTHON_ROOT&quot;nn  PYSUBVER=&quot;$(python --version 2&gt;&amp;1 | cut -d ' ' -f2)&quot;  # e.g., 2.7.10n  BREW_PYTHON_ROOT=&quot;<cite>ls -d $(brew --prefix)/Cellar/python&#64;2/$PYSUBVER*</cite>&quot;n  BREW_PYTHON_ROOT=&quot;$BREW_PYTHON_ROOT/Frameworks/Python.framework/Versions/$PYVER&quot;nn  PYTHON_BINARY=&quot;bin/python$PYVER&quot;n  FRAMEWORK_PYTHON=&quot;$BREW_PYTHON_ROOT/$PYTHON_BINARY&quot;nn  VENV_SITE_PACKAGES=&quot;$VIRTUAL_ENV/lib/python$PYVER/site-packages&quot;nn  # Ensure wx.pth is set up in the virtualenvn  # (does not seem to be necessary, so we comment it out)n  #test -e &quot;$VENV_SITE_PACKAGES/wx.pth&quot; || \n  #  cp &quot;/Library/Python/$PYVER/site-packages/wxredirect.pth&quot; &quot;$VENV_SITE_PACKAGES/wx.pth&quot;nn  # Use the Framework Python to run the appn  export PYTHONHOME=$VIRTUAL_ENVn  exec &quot;$FRAMEWORK_PYTHON&quot; &quot;$VIRTUAL_ENV/bin/$WXPYTHON_APP&quot; $*nnnnnMicrosoft Windowsn=================nnUsing the binary installern--------------------------nnThe binary installers only work with one specific Python versionnso you must first make sure that your Python installation matchesnthis version. The required version is indicated by the filename ofnthe binary installer, e.g. <tt class="docutils literal"><span class="pre">gamera-3.4.1.win-amd64-py2.7.exe</span></tt> fornthe 64bit version of Python 2.7.nnNote that the installer might show an error message in the last screen,nwhich can be ignored. The installer should create a script filen``Gamera.py`` on the desktop of the installing user, which can be usednto start the Gamera GUI with a double click.nnInstalling from sourcen----------------------nnCurrently, Gamera can be built using the MingW32/GNU toolset or withnthe Microsoft SDK. The Python core distribution for Windows officiallynonly supports the latter option, though it is possible to use MingW,nalbeit only the 32bit version of MingW (gcc). The state is currently notnvery satisfactory, because MingW is not officially supported by Pythonnand the Microsoft SDK is not officially supported by Gamera (volunteersnare welcome!).nnThere are thus three options to compile Gamera on Windows:nn- with the <a href="#id5"><span class="problematic" id="id9">`Microsoft SDK`__</span></a> (easiest solution)nn.. __: #msvcnn- with the <a href="#id5"><span class="problematic" id="id10">`standalone Mingw32`__</span></a> toolchainnn.. __: #mingw32nn- or with the MingW32 compiler installed <a href="#id5"><span class="problematic" id="id11">`inside of Cygwin`__</span></a>nn.. __: #cygwinnnIf you have success with other compilers and configurations,nplease consider contributing your experiences to this documentation.nnPrerequisitesn`````````````nn- Python 3.5.x or latern  (only the distribution from python.org has been tested)nn- wxPython 2.6.x or later (wxPython 2.8.x or later recommended forn  full functionality)nn.. _msvc:nnMicrosoft SDKn`````````````nnFor building extensions for Python 2.6, 2.7, 3.0, 3.1 and 3.2 (both 32 andn64 bit), Microsoft Visual C++ 2008 (Microsoft Visual Studio 9.0) is thencompiler that is suitable. You will need the <a href="#id5"><span class="problematic" id="id12">`Microsoft Windows SDK for\nWindows 7 and .NET Framework 3.5 SP1`__</span></a>.nn.. __: <a class="reference external" href="http://www.microsoft.com/downloads/en/details.aspx?familyid=71DEB800-C591-4F97-A900-BEA146E4FAE1&amp;displaylang=ennnNote">http://www.microsoft.com/downloads/en/details.aspx?familyid=71DEB800-C591-4F97-A900-BEA146E4FAE1&amp;displaylang=ennnNote</a> that this lacks some files required by the C99 standard, so you mustnadditionally download the header files <tt class="docutils literal">stdint.h</tt> and <tt class="docutils literal">inttypes.h</tt> fromnthe <a href="#id5"><span class="problematic" id="id13">`msinttypes project`__</span></a> and copy them to the include directory of thenSDK installation.nn.. __: <a class="reference external" href="https://code.google.com/p/msinttypes/nnAssuming">https://code.google.com/p/msinttypes/nnAssuming</a> that you have installed the 64bit version of Python, you can compilenGamera with the following commands from the Microsoft SDK shell prompt (then*color* command is not necessary, but <em>setenv</em> can change the colors of thenterminal to an unreadable combination)::nn    setenv /x64 /releasen    color 0en    set DISTUTILS_USE_SDK=1n    cd \path\to\gamera-sourcesn    \path\to\python.exe setup.py bdist_wininstnnThe installer will be built in the subdirectory <tt class="docutils literal">dist</tt> and can be startednby double click in the explorer. Note that the installer might display an errornmessage at the end, depending on the Python distutils version shipped withnyour Python installation. This message can simply be ignored.nn.. _mingw32:nnStandalone Mingw32n``````````````````nnInstall the Mingw32 port of gcc from <a class="reference external" href="http://mingw.org/">http://mingw.org/</a>. Make surenthat you do not only install <em>gcc-core</em>, but also <em>g++</em> and <em>make</em>.nAdd the <em>bin</em> subdirectory of your Mingw32 installation tonthe environment variable <tt class="docutils literal">PATH</tt>.nnAssuming you have installed Python to <tt class="docutils literal"><span class="pre">C:\\Python275</span></tt>, you cannthen compile gamera at a DOS command prompt from the root directorynof the gamera source code with::nn  C:\Python27\python setup.py build --compiler=mingw32 bdist_wininstnnThis will create a Windows installer, including uninstallation support,nin the <em>dist</em> subdirectory. It can be started with a double clicknin the Explorer, or from the DOS command prompt with::nn  start dist\gamera-<em>.exenn.. note::nn   Fixes for common problems:nn    - The Python 2.6 binary from python.org requires ``libmsvcr90.a``,n      which is an erroneous in some versions of Mingw32. To fix it, you cann      recreate the file from the DLL ``msvcr90.dll`` that comes withn      Python 2.6 with pexports__ and *dlltool</em> (the latter is part of Mingw32)::nn        pexports msvcr90.dll &gt; msvcr90.defn        dlltool --input-def msvcr90.def --dllname msvcr90.dll --output-lib libmsvcr90.a -knn      With Python 2.7 and Mingw gcc 4.6, these changes are not necessary.nn    - Recent versions of the Mingw gcc no longer support the <tt class="docutils literal"><span class="pre">-mno-cygwin</span></tt>n      option, which is however passed on by the Python distutils. If you runn      into this error, you can simply remove the option from the <a class="reference external" href="file::nn">file::nn</a>        C:\Python27\lib\distutils\cygwinccompiler.pynn.. __: <a class="reference external" href="http://sourceforge.net/projects/mingw/files/MinGW/Extension/pexports/nnn">http://sourceforge.net/projects/mingw/files/MinGW/Extension/pexports/nnn</a>.. _cygwin:nnMingw32 inside Cygwinn`````````````````````nnUse the installer from <a class="reference external" href="http://www.cygwin.com/">http://www.cygwin.com/</a> to install Cygwin,nincluding the <tt class="docutils literal"><span class="pre">g++-mingw32</span></tt> compiler and the <tt class="docutils literal">MingW32</tt> libraries.nIf you plan to track development of Gamera, you will probably alsonwant to install <tt class="docutils literal">subversion</tt>.nnThe important thing to note here is that we are using Cygwin's Mingw32ncompiler to build for the standard (non-Cygwin) Python fromnpython.org.  After a clean install of Cygwin, typing 'python' willnstart up Cygwin's version of Python, not the one from python.org.nTherefore, you will want to add the standard Python to your CygwinnPATH using the command (assuming you installed Python in standard location)::nn  export PATH=/cygdrive/c/Python25/:$PATHnnEnsure you are using the correct Python by typing::nn  which pythonnnThe result should be <tt class="docutils literal">/cygdrive/c/Python25/python.exe</tt>, notn``/usr/bin/python``.nnBeware that the file <tt class="docutils literal">/usr/bin/gcc</tt> installed by Cygwin actuallynis <em>not</em> the compiler executable, but a symbolic link. Symbolicnlinks are not supported by MS Windows, but are a Cygwin-onlynfeature. This means that the Python Distutils system cannot executen``/usr/bin/gcc`` and the build command will fail. To fix this,nreplace the symbolic link with the actual compiler executable::nn  cp /usr/bin/gcc-3 /usr/bin/gccn  cp /usr/bin/g++-3 /usr/bin/g++nnFrom here on, you can proceed as for the standalone Mingw32 toolchain,ni.e.::nn  python setup.py build --compiler=mingw32 bdist_wininstn  dist/gamera-<a href="#id3"><span class="problematic" id="id4">*</span></a>.exenn'</p>
<div class="system-message" id="id1">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">./src/install.txt</tt>, line 1); <em><a href="#id2">backlink</a></em></p>
Unknown interpreted text role &quot;raw-html&quot;.</div>
<div class="system-message" id="id3">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">./src/install.txt</tt>, line 1); <em><a href="#id4">backlink</a></em></p>
Inline emphasis start-string without end-string.</div>
<div class="system-messages section">
<h1>Docutils System Messages</h1>
<div class="system-message" id="id5">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">./src/install.txt</tt>, line 2); <em>backlinks: <a href="#id6">1</a>, <a href="#id7">2</a>, <a href="#id8">3</a>, <a href="#id9">4</a>, <a href="#id10">5</a>, <a href="#id11">6</a>, <a href="#id12">7</a>, <a href="#id13">8</a></em></p>
Anonymous hyperlink mismatch: 8 references but 0 targets.
See &quot;backrefs&quot; attribute for IDs.</div>
</div>
</div>
</body>
</html>
