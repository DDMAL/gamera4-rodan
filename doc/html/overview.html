<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.15.2: http://docutils.sourceforge.net/" />
<title>overview.txt</title>
<link rel="stylesheet" href="default.css" type="text/css" />
</head>
<body>
<div class="document">


<p>b'===========================nA gentle overview of Gameran===========================nn**Last modified**: June 03, 2019nn.. contents::nn.. role:: raw-html(raw)n   :format: htmln.. footer:: <a href="#id1"><span class="problematic" id="id2">:raw-html:`&lt;div style=&quot;text-align:right;&quot;&gt;For contact information, see &lt;a href=&quot;http://gamera.informatik.hsnr.de/contact.html&quot;&gt;http://gamera.informatik.hsnr.de/contact.html&lt;/a&gt;&lt;/div&gt;`</span></a>nnn.. note:: This document was adapted from the following paper:n          Droettboom, M., MacMillan, K., and Fujinaga, I. 2003. <em>The Gameran          framework for building custom recognition systems</em>. In proceedings,n          Symposium on Document Image Understanding Technology.nnIntroductionn============nnGamera is a framework for the creation of structured document analysisnapplications by domain experts. Domain experts are individuals whonhave a strong knowledge of the documents in a collection, but may notnhave a formal technical background. The goal is to create a tool thatnleverages their knowledge of the target documents to create customnapplications rather than attempting to meet diverse requirements withna monolithic application.nnThis paper gives an overview of the architecture and design principlesnof Gamera.nnArchitecture overviewn=====================nnDeveloping recognition systems for difficult historical documentsnrequires experimentation since the solution is oftennnon-obvious. Therefore, Gamera's primary goal is to support annefficient test-and-refine development cycle. Virtually everynimplementation detail is driven by this goal. For instance, Pythonn[Rossum2002]_ was chosen as the core language because of itsnintrospection capabilities, dynamic typing and ease of use. It hasnbeen used as a first programming language with considerable successn[Berehzny2001]_. C++ is used to write plugins where runtime performancenis a priority, but even in that case, the <a href="#id5"><span class="problematic" id="id6">`Gamera plugin system`__</span></a> isndesigned to make writing extensions as easy as possible. Gameranincludes a full-fledged graphical user interface that provides annumber of shortcuts for training, as well as inspection of the resultsnof algorithms at every step. By improving the ease of experimentation,nwe hope to put the power to develop recognition systems with those whonunderstand the documents best. We expect at least two kinds ofndevelopers to work with the system: those with a technical backgroundnadding algorithms to the system, and those working on the higher-levelnaggregation of those pieces. It is important to note this distinction,nsince those groups represent different skill sets and requirements.nn.. __: writing_plugins.htmlnnIn addition to its support of test-and-refine development, Gamera alsonhas several other advantages that are important to large-scalendigitization projects in general. These are:nn   * <strong>Open source code</strong> and <strong>standards-compliance</strong> so that the softwaren     can interact well with other parts of a digitization frameworknn   * <strong>Platform independence</strong>, running on a variety of operating systemsn     including Linux, Microsoft Windows and Mac OS-X nn   * <strong>A workflow system</strong> to combine high-level tasks nn   * <strong>Batch processing</strong>nn   * <strong>A unit-testing framework</strong> to ensure correctness and avoid regressionnn   * <strong>User interface components</strong> for development and classifier trainingnn   * <strong>Recognition confidence output</strong> so that collection managers cann     easily target documents that need correction or differentn     recognition strategiesnnTasksn-----nnGamera has a modular plugin architecture. These modules typicallynperform one of five document recognition tasks:nn       1. Pre-processingn       2. Document segmentation and analysisn       3. Symbol segmentation and classificationn       4. Syntactical or structural analysisn       5. OutputnnEach of these tasks can be arbitrarily complex, involve multiplenstrategies or modules, or be removed entirely depending on thenspecific recognition problem at hand. The actual steps that make up ancomplete recognition system are completely controlled by the user.nnPre-processingn``````````````nnPre-processing involves standard image-processing operations such asnnoise removal, blurring, de-skewing, contrast adjustment, sharpening,nbinarization, and morphology. Close attention to and refinement ofnthese steps is particularly important when working with degradednhistorical documents.nnDocument segmentation and analysisn``````````````````````````````````nnBefore the symbols of a document can be classified, an analysis of thenoverall structure of the document may be necessary. The purpose ofnthis step is to analyze the structure of the document, segment it intonsections, and perhaps identify and remove elements. For example, innthe case of music recognition, it is necessary to identify and removenthe staff lines in order to be able to properly separate thenindividual symbols. Similarly, text documents may require the removalnof figures.nnSymbol segmentation and classificationn``````````````````````````````````````nnThe segmentation, feature extraction, and classification of symbols isnthe core of the Gamera system. The system allows different segmentersnand classifiers to be plugged-in.nnClassifiers come in two flavors: &quot;interactive&quot; classifiers, wherenexamples can be added and the results tested immediately, andn&quot;non-interactive&quot; classifiers, that are highly optimized butnstatic. Gamera has a generic and flexible <a href="#id5"><span class="problematic" id="id7">`XML-based file format`__</span></a> tonstore classifier data, but for efficiency, the &quot;non-interactive&quot;nclassifiers can also define their own format containing Pre-parsed ornpre-optimized data. At present, we have an implementation of the kn-nearest neighbor (kNN) algorithm <a href="#id12"><span class="problematic" id="id3">[Cover1967]_</span></a> whose selections and weightsncan be optimized by a genetic algorithm (GA) <a href="#id13"><span class="problematic" id="id4">[Holland1975]_</span></a>. We have testednthe extensibility of our classifier framework by porting a simplenback-propagating neural network library to Gameran[Schemenauer2002]_. We also plan to examine what modifications would bennecessary to support stateful classifiers, such as hidden Markovnmodels.  nn.. __: xml_format.htmlnnSyntactical and structural analysisn```````````````````````````````````nnThis process reconstructs a document into a semantic representation ofnthe individual symbols. Examples of this include combining stems,nflags, and noteheads into musical objects, or grouping words andnnumbers into lines, paragraphs, columns etc. Obviously, this processnis entirely dependent on the type of document being processed and is anlikely place for large customizations by knowledgeable users.nnOutputn``````nnGamera stores groups of glyphs in an <a href="#id5"><span class="problematic" id="id8">`XML-based file format`__</span></a>. Thisnmakes it very easy to save, load, and merge sets of trainingndata. Since a run-length encoded copy of the glyph is included, it isneasy to load the original images and inspect, edit or generate newnfeatures from them.nn.. __: xml_format.htmlnn.. code:: XMLnn   &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;n   &lt;gamera-database version=&quot;2.0&quot;&gt;n    &lt;glyphs&gt;n     &lt;glyph uly=&quot;798&quot; ulx=&quot;784&quot; nrows=&quot;15&quot; ncols=&quot;12&quot;&gt;n      &lt;ids state=&quot;MANUAL&quot;&gt;n       &lt;id name=&quot;lower.c&quot; confidence=&quot;1.000000&quot;/&gt;n      &lt;/ids&gt;n      &lt;!-- Run-length encoded binary image (white first) --&gt;n      &lt;data&gt;n       5 6 4 9 2 4 2 4 2 4 3 3 1 4 6 5 8 4 9 3 8 4 9 4 8 5 7 5 3 3 3 9 3 9 6n       4 2 0 n      &lt;/data&gt;n      &lt;features scaling=&quot;1.0&quot;&gt;n       &lt;feature name=&quot;area&quot;&gt;n        180.0n       &lt;/feature&gt;n       &lt;feature name=&quot;aspect_ratio&quot;&gt;n        0.8n       &lt;/feature&gt;n       &lt;feature name=&quot;compactness&quot;&gt;n        0.584269662921n       &lt;/feature&gt;n       &lt;feature name=&quot;moments&quot;&gt;n        0.219907407407 0.228888888889 0.0697385116598 0.126611111111n        0.0505606995885 0.0203254388586 0.0177776861746 0.00727370913662n        0.0488995911061n       &lt;/feature&gt;n       ...n      &lt;/features&gt;n     &lt;/glyph&gt;n     ...n    &lt;/glyphs&gt;n   &lt;/gamera-database&gt; nnOutput of data that is specific to a particular type of document,ni.e. post-structural interpretation, is deliberately left open-ended,nsince different domains will have different requirements.  nnGraphical user interfacen========================nnSince document recognition is an inherently visual problem, angraphical user interface (GUI) is included to allow the applicationndeveloper to experiment with different recognition strategies. At thencore of the interface is the console window which allows thenprogrammer to run code interactively and control the system either byntyping commands or using menus. All commands are recorded in anhistory, which can later be used for building automatic batch scripts.nn    .. image: images/console.pngnnThe interface also includes a simple image viewer, image analysisntools, and a training interface for the learning classifiers.nn    .. image: images/classifier_window.pngnnThe training interface allows the user to create databases of labelednglyphs, including the merging and splitting of connected components.nnThe interface can easily be extended to include new elements asnmodules are added to Gamera. The entire GUI is written in Python,nusing the wxPython toolkit.n    nThe Gamera GUI documentation contains more information.nnImplementation detailsn======================nnImage classesn-------------nnThe storage and manipulation of images is one of the most importantnaspects of Gamera. Gamera must provide not only general-purpose imagenmanipulation functions, but also infrastructure to support the symbolnsegmentation and analysis. The features of the Image classes in Gameraninclude:nn**Polymorphic image types.**n    Gamera images can be in stored using a number of different pixeln    types, including color (24-bit RGB), greyscale (8- and 16-bit),n    floating point (32-bit) and bi-level images, though new imagesn    types can be added as desired.nn**Consistent programming interface.**n    The interface to all types of images (in both C++ and Python) isn    the same. While some methods are not available for all image typesn    (e.g. thresholding a bi-level image would not make sense), in manyn    cases image types are interchangeable, meaning types can ben    changed at different points in the development process.nn**Use of existing code libraries.**n    The image classes have been designed especially to maken    transferring code from other ccpp image processing libraries asn    easy as possible. For example, many algorithms in the VIGRAn    library [Jxc3xa4hne1999]_ can be used in Gamera withoutn    modification. Using C libraries, such as XITE [Bxc3xb8e1998]_, oftenn    requires only a few minor modifications of the code. This abilityn    has reduced our development time considerably.nn**Portions of images.**n    The image classes allow for the flexible and efficientn    representation of portions of images, including non-rectangularn    regions, without resorting to memory copying. The bi-level imagesn    actually store 16-bits-per-pixel, so that labeling information cann    be stored to define connected components. This uses a considerablyn    smaller memory footprint than using separate data for eachn    connected component.nnThe <a href="#id5"><span class="problematic" id="id9">`image types documentation`__</span></a> contains more information.nn.. __: image_types.htmlnnThe plugin systemn-----------------nnWriting wrapper code to call C/C++ from Python is a time-consuming,nerror-prone and repetitive task. A number of general-purpose toolsnexist to help automate this process, including <a href="#id14"><span class="problematic" id="id15">SWIG_</span></a> and <a href="#id5"><span class="problematic" id="id10">`Boost\nPython`__</span></a>. In fact, an earlier version of Gamera used Boost Python, butnthe additional function-call overhead for our highly polymorphic imagentypes lead to poor performance of that system as a whole. We havensince developed our own wrapper-generating mechanism specific tonGamera and its classes. This allowed us to provide optimizations andnconveniences to the programmer that would not be possible with a morengeneral approach.nn.. _SWIG: <a class="reference external" href="http://www.swig.org/n">http://www.swig.org/n</a>.. __: <a class="reference external" href="http://www.boost.org/nnTo">http://www.boost.org/nnTo</a> add a plugin function to Gamera, a programmer writes metadata aboutnthe function (in Python) and a single function to perform annimage-processing task (in C++). Plugin functions are grouped intonstandard Python modules, which are collections of related classes andnfunctions.nnSee <a href="#id5"><span class="problematic" id="id11">`Writing Gamera plugins`__</span></a> for more information.nn.. __: writing_plugins.htmlnnBibliographyn============nn.. [Rossum2002] Rossum, G. 2002. Python languagen  reference. F. L. Drake, Jr., ed. <a class="reference external" href="http://www.python.orgnn">http://www.python.orgnn</a>.. [Berehzny2001] Berehzny, L., J. Elkner, and J. Straw. 2001. Usingn  Python in a high school computer science program: Yearn  2. International Python Conference. 217--23.nn.. [Cover1967] Cover, T. and P. Hart. 1967. Nearest neighbour patternn  classification. IEEE Transactions on Information Theory. 13(1): 21--7.nn.. [Holland1975] Holland, J. H. 1975. Adaptation in natural andn  artificial systems. University of Michigan Press, Ann Arbor.nn.. [Schemenauer2002] Schemenauer, N. 2002. A simple neural networkn  library bpnn.py. Computer software. <a class="reference external" href="http://arctrix.com/nas/nn">http://arctrix.com/nas/nn</a>.. [Jxc3xa4hne1999] Jxc3xa4hne, B., H. Hauxc3x9fecker, and P. Geixc3x9fler. 1999. Reusablen  software in Computer Vision. Handbook on Computer Vision andn  Applications. New York: Academic Press.nn.. [Bxc3xb8e1998] Bxc3xb8e, S., T. Lxc3xb8nnestad, and O. Milvang. 1998. XITE:n  X-based image processing tools and environment: User's manual, versionn  3.4. Technical Report 56, Image Processing Laboratory, Department ofn  Informatics, University of Oslo.n'</p>
<div class="system-message" id="id1">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">./src/overview.txt</tt>, line 1); <em><a href="#id2">backlink</a></em></p>
Unknown interpreted text role &quot;raw-html&quot;.</div>
<div class="system-messages section">
<h1>Docutils System Messages</h1>
<div class="system-message" id="id5">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">./src/overview.txt</tt>, line 2); <em>backlinks: <a href="#id6">1</a>, <a href="#id7">2</a>, <a href="#id8">3</a>, <a href="#id9">4</a>, <a href="#id10">5</a>, <a href="#id11">6</a></em></p>
Anonymous hyperlink mismatch: 6 references but 0 targets.
See &quot;backrefs&quot; attribute for IDs.</div>
<div class="system-message" id="id12">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">./src/overview.txt</tt>, line 1); <em><a href="#id3">backlink</a></em></p>
Unknown target name: &quot;cover1967&quot;.</div>
<div class="system-message" id="id13">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">./src/overview.txt</tt>, line 1); <em><a href="#id4">backlink</a></em></p>
Unknown target name: &quot;holland1975&quot;.</div>
<div class="system-message" id="id14">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">./src/overview.txt</tt>, line 1); <em><a href="#id15">backlink</a></em></p>
Unknown target name: &quot;swig&quot;.</div>
</div>
</div>
</body>
</html>
